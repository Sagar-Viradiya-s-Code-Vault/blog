<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Sugar koating Physics based Animation API | Sagar's Blog</title>
<meta name=keywords content="Kotlin,Android,Android Animations"><meta name=description content="A syntactic sugar on Android&rsquo;s Physics based Animation API"><meta name=author content><link rel=canonical href=https://sagarviradiya.dev/posts/sugar-koating-animation-api/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.0ca7eb5c58d462c1500c10b5503144143e6a21142fc22557ae94a8112158af8d.css integrity="sha256-DKfrXFjUYsFQDBC1UDFEFD5qIRQvwiVXrpSoESFYr40=" rel="preload stylesheet" as=style><link rel=icon href=https://sagarviradiya.dev/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://sagarviradiya.dev/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://sagarviradiya.dev/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://sagarviradiya.dev/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://sagarviradiya.dev/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="Sugar koating Physics based Animation API"><meta property="og:description" content="A syntactic sugar on Android&rsquo;s Physics based Animation API"><meta property="og:type" content="article"><meta property="og:url" content="https://sagarviradiya.dev/posts/sugar-koating-animation-api/"><meta property="og:image" content="https://sagarviradiya.dev/images/header.jpeg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-11-09T00:00:00+00:00"><meta property="article:modified_time" content="2018-11-09T00:00:00+00:00"><meta property="og:site_name" content="Sagar's Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://sagarviradiya.dev/images/header.jpeg"><meta name=twitter:title content="Sugar koating Physics based Animation API"><meta name=twitter:description content="A syntactic sugar on Android&rsquo;s Physics based Animation API"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://sagarviradiya.dev/posts/"},{"@type":"ListItem","position":2,"name":"Sugar koating Physics based Animation API","item":"https://sagarviradiya.dev/posts/sugar-koating-animation-api/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Sugar koating Physics based Animation API","name":"Sugar koating Physics based Animation API","description":"A syntactic sugar on Android\u0026rsquo;s Physics based Animation API","keywords":["Kotlin","Android","Android Animations"],"articleBody":"Roughly a year ago I wrote about android physics based animation and also open sourced sample app to demonstrate its implementation. I have been maintaining that repo and made few changes since then. Lately I decided to revisit it again and try to come up with kotlin extensions for API. In this post we will see few extension functions for SpringAnimation and FlingAnimation that will make code clean and easy to understand. So let’s dive in.\nExtensions for SpringAnimation If you want to create SpringAnimation on a view property there are two ways as shown below.\nval springAnimation = SpringAnimation(view, DynamicAnimation.Y) val springAnimation = SpringAnimation(view, DynamicAnimation.Y, 0f) Only difference between two is final position of spring. But this is however boring and we can make it more interesting using extension function so that we can express it in functional way.\nfun \u003cK\u003e K.springAnimationOf( property: FloatPropertyCompat\u003cK\u003e, finalPosition: Float = Float.NaN ): SpringAnimation { return if (finalPosition.isNaN()) { SpringAnimation(this, property) } else { SpringAnimation(this, property, finalPosition) } } As you can see above extension function is on all type. So on any type you can call this function. Function takes 2 parameters, property to be animated and finalPosition which is optional in case if you want to create SpringAnimation without finalPosition as seen above. Now let’s see how you can create SpringAnimation in functional way using above extension function.\nval springAnimation = view.springAnimationOf(DynamicAnimation.TRANSLATION_Y) val springAnimation = view.springAnimationOf(DynamicAnimation.TRANSLATION_Y, 0f) Now some of you might say you are abusing extension function because same thing can be done easily using normal constructor way and there is no point of using extension here.\nNow some of you might say you are abusing extension function because same thing can be done easily using normal constructor way and there is no point of using extension here.\nInitially I had same thought but if you see in terms of readability I think using extension function make sense here. Let’s move on to next extension for SpringAnimation.\nIf you create SpringAnimation with finalPosition, internally SpringAnimation class will create SpringForce and attach with itself. However you may want to customise or create new SpringForce (in case SpringAnimation is created without finalPosition). It would look something like this.\nval springForce = SpringForce(0f) .setStiffness(SpringForce.STIFFNESS_MEDIUM) .setDampingRatio(SpringForce.DAMPING_RATIO_HIGH_BOUNCY) val springAnimation = SpringAnimation(view, DynamicAnimation.TRANSLATION_X).setSpring(springForce) Let’s see extension function to simplify this.\ninline fun SpringAnimation.withSpringForceProperties(func: SpringForce.() -\u003e Unit): SpringAnimation { if (spring == null) { spring = SpringForce() } spring.func() return this } It’s an extension on SpringAnimation itself which takes another extension function on SpringForce as parameter. Since it is lambda with receiver we have access to all its private data members and methods within it. So we can access stiffness, dampingRatio and finalPosition of SpringForce within it. Notice it has null check for SpringForce in line number 3 because if your SpringAnimation is created without finalPosition then it won’t have SpringForce so it will create for you in line number 4. In line number 6 it will simply apply function on SpringForce and finally return SpringAnimation back in line number 7. Let’s see the usage.\nval springAnimation = SpringAnimation(view, DynamicAnimation.TRANSLATION_X) .withSpringForceProperties { finalPosition = 0f stiffness = SpringForce.STIFFNESS_MEDIUM dampingRatio = SpringForce.DAMPING_RATIO_HIGH_BOUNCY } Code is much cleaner and readable compare to one without extension function.\nExtension for FlingAnimation Creating FlingAnimation is simple and straightforward as shown below.\nval flingAnimation = FlingAnimation(view, DynamicAnimation.Y) Same as SpringAnimation we can express this in a functional way using extension function.\nfun \u003cK\u003e K.flingAnimationOf(property: FloatPropertyCompat\u003cK\u003e): FlingAnimation { return FlingAnimation(this, property) } Let’s see the usage.\nval flingAnimation = view.flingAnimationOf(DynamicAnimation.Y) That’s all I have :)\nAll extensions we saw are going to be part of Android KTX in the future release. I will drop an update here once it is available. Meanwhile, you can find all extension functions here in my github repo. I would like to thank Jake Wharton for suggesting improvements on my initial extension functions.\nUpdate : All the extensions in this post are now part of Android KTX for dynamic animation. Currently(While updating this note) it’s in alpha 01. Keep an eye on release notes here to keep track of future releases.\nI would like to know your thoughts on extension functions we saw. If you have any suggestion or correction to make this extension functions better feel free to drop a comment below or reach out to me on twitter.\nThat’s it for now folks :)\nThanks to Doris Liu and Nick Butcher for proofreading.\nThis was originally posted on Medium\n","wordCount":"743","inLanguage":"en","image":"https://sagarviradiya.dev/images/header.jpeg","datePublished":"2018-11-09T00:00:00Z","dateModified":"2018-11-09T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://sagarviradiya.dev/posts/sugar-koating-animation-api/"},"publisher":{"@type":"Organization","name":"Sagar's Blog","logo":{"@type":"ImageObject","url":"https://sagarviradiya.dev/%3Clink%20/%20abs%20url%3E"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://sagarviradiya.dev/ accesskey=h title="127.0.0.1 (Alt + H)"><img src=https://sagarviradiya.dev/apple-touch-icon.png alt aria-label=logo height=35>127.0.0.1</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://sagarviradiya.dev/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://sagarviradiya.dev/talks/ title=Talks><span>Talks</span></a></li><li><a href=https://sagarviradiya.dev/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://sagarviradiya.dev/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://sagarviradiya.dev/>Home</a>&nbsp;»&nbsp;<a href=https://sagarviradiya.dev/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Sugar koating Physics based Animation API</h1><div class=post-meta><span title='2018-11-09 00:00:00 +0000 UTC'>November 9, 2018</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;743 words</div></header><figure class=entry-cover><a href=https://sagarviradiya.dev/posts/sugar-koating-animation-api/images/header.jpeg target=_blank rel="noopener noreferrer"><img loading=eager srcset="https://sagarviradiya.dev/posts/sugar-koating-animation-api/images/header_hu602e0fd7a008d3366924bb7426c9450f_1427643_360x0_resize_q75_box.jpeg 360w ,https://sagarviradiya.dev/posts/sugar-koating-animation-api/images/header_hu602e0fd7a008d3366924bb7426c9450f_1427643_480x0_resize_q75_box.jpeg 480w ,https://sagarviradiya.dev/posts/sugar-koating-animation-api/images/header_hu602e0fd7a008d3366924bb7426c9450f_1427643_720x0_resize_q75_box.jpeg 720w ,https://sagarviradiya.dev/posts/sugar-koating-animation-api/images/header_hu602e0fd7a008d3366924bb7426c9450f_1427643_1080x0_resize_q75_box.jpeg 1080w ,https://sagarviradiya.dev/posts/sugar-koating-animation-api/images/header_hu602e0fd7a008d3366924bb7426c9450f_1427643_1500x0_resize_q75_box.jpeg 1500w ,https://sagarviradiya.dev/posts/sugar-koating-animation-api/images/header.jpeg 3960w" sizes="(min-width: 768px) 720px, 100vw" src=https://sagarviradiya.dev/posts/sugar-koating-animation-api/images/header.jpeg alt="Photo by [Sarah Pflug](https://burst.shopify.com/@sarahpflugphoto?utm_campaign=photo_credit&amp;utm_content=Free+Stock+Photo+of+Sugar+Dusted+Pie+—+HD+Images&amp;utm_source=credit) on [Burst](https://burst.shopify.com/thanksgiving?utm_campaign=photo_credit&amp;utm_content=Free+Stock+Photo+of+Sugar+Dusted+Pie+—+HD+Images&amp;utm_source=credit)" width=3960 height=2640></a><p>Photo by <a href="https://burst.shopify.com/@sarahpflugphoto?utm_campaign=photo_credit&amp;utm_content=Free+Stock+Photo+of+Sugar+Dusted+Pie+%E2%80%94+HD+Images&amp;utm_source=credit">Sarah Pflug</a> on <a href="https://burst.shopify.com/thanksgiving?utm_campaign=photo_credit&amp;utm_content=Free+Stock+Photo+of+Sugar+Dusted+Pie+%E2%80%94+HD+Images&amp;utm_source=credit">Burst</a></p></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#extensions-for-springanimation>Extensions for SpringAnimation</a></li><li><a href=#extension-for-flinganimation>Extension for FlingAnimation</a></li></ul></nav></div></details></div><div class=post-content><p>Roughly a year ago I wrote about <a href=https://android.jlelse.eu/android-physics-based-animation-cf0cc125830f>android physics based animation</a> and also open sourced <a href=https://github.com/sagar-viradiya/AndroidPhysicsAnimation>sample app</a> to demonstrate its implementation. I have been maintaining that repo and made few changes since then. Lately I decided to revisit it again and try to come up with kotlin extensions for API. In this post we will see few extension functions for <a href=https://developer.android.com/reference/android/support/animation/SpringAnimation.html><code>SpringAnimation</code></a> and <a href=https://developer.android.com/reference/android/support/animation/FlingAnimation.html><code>FlingAnimation</code></a> that will make code clean and easy to understand. So let’s dive in.</p><h2 id=extensions-for-springanimation>Extensions for SpringAnimation<a hidden class=anchor aria-hidden=true href=#extensions-for-springanimation>#</a></h2><p>If you want to create <code>SpringAnimation</code> on a view property there are two ways as shown below.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>val</span> <span class=py>springAnimation</span> <span class=p>=</span> <span class=n>SpringAnimation</span><span class=p>(</span><span class=n>view</span><span class=p>,</span> <span class=nc>DynamicAnimation</span><span class=p>.</span><span class=n>Y</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>val</span> <span class=py>springAnimation</span> <span class=p>=</span> <span class=n>SpringAnimation</span><span class=p>(</span><span class=n>view</span><span class=p>,</span> <span class=nc>DynamicAnimation</span><span class=p>.</span><span class=n>Y</span><span class=p>,</span> <span class=m>0f</span><span class=p>)</span>
</span></span></code></pre></div><p>Only difference between two is <strong>final position</strong> of spring. But this is however boring and we can make it more interesting using extension function so that we can express it in functional way.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>fun</span> <span class=p>&lt;</span><span class=nc>K</span><span class=p>&gt;</span> <span class=nf>K</span><span class=p>.</span><span class=n>springAnimationOf</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=k>property</span><span class=p>:</span> <span class=n>FloatPropertyCompat</span><span class=p>&lt;</span><span class=n>K</span><span class=p>&gt;,</span>
</span></span><span class=line><span class=cl>    <span class=n>finalPosition</span><span class=p>:</span> <span class=n>Float</span> <span class=p>=</span> <span class=nc>Float</span><span class=p>.</span><span class=n>NaN</span>
</span></span><span class=line><span class=cl><span class=p>):</span> <span class=n>SpringAnimation</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>if</span> <span class=p>(</span><span class=n>finalPosition</span><span class=p>.</span><span class=n>isNaN</span><span class=p>())</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>SpringAnimation</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=k>property</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>SpringAnimation</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=k>property</span><span class=p>,</span> <span class=n>finalPosition</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>As you can see above extension function is on all type. So on any type you can call this function. Function takes 2 parameters, <code>property</code> to be animated and <code>finalPosition</code> which is optional in case if you want to create <code>SpringAnimation</code> without <code>finalPosition</code> as seen above. Now let’s see how you can create <code>SpringAnimation</code> in functional way using above extension function.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>val</span> <span class=py>springAnimation</span> <span class=p>=</span> <span class=n>view</span><span class=p>.</span><span class=n>springAnimationOf</span><span class=p>(</span><span class=nc>DynamicAnimation</span><span class=p>.</span><span class=n>TRANSLATION_Y</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>val</span> <span class=py>springAnimation</span> <span class=p>=</span> <span class=n>view</span><span class=p>.</span><span class=n>springAnimationOf</span><span class=p>(</span><span class=nc>DynamicAnimation</span><span class=p>.</span><span class=n>TRANSLATION_Y</span><span class=p>,</span> <span class=m>0f</span><span class=p>)</span>
</span></span></code></pre></div><p>Now some of you might say you are abusing extension function because same thing can be done easily using normal constructor way and there is no point of using extension here.</p><p>Now some of you might say you are abusing extension function because same thing can be done easily using normal constructor way and there is no point of using extension here.</p><iframe width=480 height=270 src=https://giphy.com/embed/3o7WTIVuAOn8lBYN7W frameborder allowfullscreen></iframe><p>Initially I had same thought but if you see in terms of readability I think using extension function make sense here. Let’s move on to next extension for <code>SpringAnimation</code>.</p><p>If you create <code>SpringAnimation</code> with <code>finalPosition</code>, internally <code>SpringAnimation</code> class will create <code>SpringForce</code> and attach with itself. However you may want to customise or create new <code>SpringForce</code> (in case <code>SpringAnimation</code> is created without <code>finalPosition</code>). It would look something like this.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>val</span> <span class=py>springForce</span> <span class=p>=</span> <span class=n>SpringForce</span><span class=p>(</span><span class=m>0f</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=p>.</span><span class=n>setStiffness</span><span class=p>(</span><span class=nc>SpringForce</span><span class=p>.</span><span class=n>STIFFNESS_MEDIUM</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=p>.</span><span class=n>setDampingRatio</span><span class=p>(</span><span class=nc>SpringForce</span><span class=p>.</span><span class=n>DAMPING_RATIO_HIGH_BOUNCY</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>val</span> <span class=py>springAnimation</span> <span class=p>=</span> <span class=n>SpringAnimation</span><span class=p>(</span><span class=n>view</span><span class=p>,</span> <span class=nc>DynamicAnimation</span><span class=p>.</span><span class=n>TRANSLATION_X</span><span class=p>).</span><span class=n>setSpring</span><span class=p>(</span><span class=n>springForce</span><span class=p>)</span>
</span></span></code></pre></div><p>Let’s see extension function to simplify this.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>inline</span> <span class=k>fun</span> <span class=nf>SpringAnimation</span><span class=p>.</span><span class=n>withSpringForceProperties</span><span class=p>(</span><span class=n>func</span><span class=p>:</span> <span class=nc>SpringForce</span><span class=p>.()</span> <span class=o>-&gt;</span> <span class=n>Unit</span><span class=p>):</span> <span class=n>SpringAnimation</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>spring</span> <span class=o>==</span> <span class=k>null</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>spring</span> <span class=p>=</span> <span class=n>SpringForce</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>spring</span><span class=p>.</span><span class=n>func</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>this</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>It’s an extension on <code>SpringAnimation</code> itself which takes another extension function on <code>SpringForce</code> as parameter. Since it is lambda with receiver we have access to all its private data members and methods within it. So we can access <strong><code>stiffness</code></strong>, <strong><code>dampingRatio</code></strong> and <strong><code>finalPosition</code></strong> of <code>SpringForce</code> within it. Notice it has null check for <code>SpringForce</code> in line number 3 because if your <code>SpringAnimation</code> is created without <code>finalPosition</code> then it won’t have <code>SpringForce</code> so it will create for you in line number 4. In line number 6 it will simply apply function on SpringForce and finally return <code>SpringAnimation</code> back in line number 7. Let’s see the usage.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>val</span> <span class=py>springAnimation</span> <span class=p>=</span> <span class=n>SpringAnimation</span><span class=p>(</span><span class=n>view</span><span class=p>,</span> <span class=nc>DynamicAnimation</span><span class=p>.</span><span class=n>TRANSLATION_X</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>.</span><span class=n>withSpringForceProperties</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>finalPosition</span> <span class=p>=</span> <span class=m>0f</span>
</span></span><span class=line><span class=cl>		<span class=n>stiffness</span> <span class=p>=</span> <span class=nc>SpringForce</span><span class=p>.</span><span class=n>STIFFNESS_MEDIUM</span>
</span></span><span class=line><span class=cl>		<span class=n>dampingRatio</span> <span class=p>=</span> <span class=nc>SpringForce</span><span class=p>.</span><span class=n>DAMPING_RATIO_HIGH_BOUNCY</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span></code></pre></div><p>Code is much cleaner and readable compare to one without extension function.</p><h2 id=extension-for-flinganimation>Extension for FlingAnimation<a hidden class=anchor aria-hidden=true href=#extension-for-flinganimation>#</a></h2><p>Creating <code>FlingAnimation</code> is simple and straightforward as shown below.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>val</span> <span class=py>flingAnimation</span> <span class=p>=</span> <span class=n>FlingAnimation</span><span class=p>(</span><span class=n>view</span><span class=p>,</span> <span class=nc>DynamicAnimation</span><span class=p>.</span><span class=n>Y</span><span class=p>)</span>
</span></span></code></pre></div><p>Same as <code>SpringAnimation</code> we can express this in a functional way using extension function.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>fun</span> <span class=p>&lt;</span><span class=nc>K</span><span class=p>&gt;</span> <span class=nf>K</span><span class=p>.</span><span class=n>flingAnimationOf</span><span class=p>(</span><span class=k>property</span><span class=p>:</span> <span class=n>FloatPropertyCompat</span><span class=p>&lt;</span><span class=n>K</span><span class=p>&gt;):</span> <span class=n>FlingAnimation</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>FlingAnimation</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=k>property</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Let’s see the usage.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>val</span> <span class=py>flingAnimation</span> <span class=p>=</span> <span class=n>view</span><span class=p>.</span><span class=n>flingAnimationOf</span><span class=p>(</span><span class=nc>DynamicAnimation</span><span class=p>.</span><span class=n>Y</span><span class=p>)</span>
</span></span></code></pre></div><p>That’s all I have :)</p><p>All extensions we saw are going to be part of <a href=https://android.googlesource.com/platform/frameworks/support/+/androidx-master-dev/dynamic-animation/ktx/src/main/java/androidx/dynamicanimation/animation/DynamicAnimation.kt>Android KTX</a> in the future release. I will drop an update here once it is available. Meanwhile, you can find all extension functions <a href=https://github.com/sagar-viradiya/AndroidPhysicsAnimation/blob/master/app/src/main/java/com/example/sagar/physicsanimation/utils/PhysicsAnimationExtensions.kt>here</a> in my github repo. I would like to thank <a href=https://medium.com/u/8ddd94878165>Jake Wharton</a> for suggesting improvements on my initial extension functions.</p><blockquote><p>Update : All the extensions in this post are now part of Android KTX for dynamic animation. Currently(While updating this note) it’s in alpha 01. Keep an eye on release notes <a href=https://developer.android.com/jetpack/androidx/releases/>here</a> to keep track of future releases.</p></blockquote><p>I would like to know your thoughts on extension functions we saw. If you have any suggestion or correction to make this extension functions better feel free to drop a comment below or reach out to me on <a href=https://twitter.com/viradiya_sagar>twitter</a>.</p><p>That’s it for now folks :)</p><p><em>Thanks to <a href=https://medium.com/u/c6093e8a8d5b>Doris Liu</a> and <a href=https://medium.com/u/22c02a30ae04>Nick Butcher</a> for proofreading.</em></p><blockquote><p><em>This was originally posted on <a href=https://medium.com/proandroiddev/sugar-koating-physics-based-animation-api-263d43a7d312>Medium</a></em></p></blockquote></div><footer class=post-footer><ul class=post-tags><li><a href=https://sagarviradiya.dev/tags/kotlin/>Kotlin</a></li><li><a href=https://sagarviradiya.dev/tags/android/>Android</a></li><li><a href=https://sagarviradiya.dev/tags/android-animations/>Android Animations</a></li></ul><nav class=paginav><a class=prev href=https://sagarviradiya.dev/posts/eazy-permissions/><span class=title>« Prev</span><br><span>Eazy permissions</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://sagarviradiya.dev/>Sagar's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>